# Story 2.2: Animation d'entrée "waou effect"

## Status
Draft

## Story

**As a** utilisateur visitant le portfolio,  
**I want** voir une animation d'entrée impressionnante après le chargement,  
**so that** la première impression soit mémorable et professionnelle.

## Contexte et objectif

### Contexte
Cette story ajoute une animation d'entrée "waou effect" qui s'affiche après le LoadingScreen et avant le Desktop, créant un effet visuel impressionnant.

### Objectif
Créer une animation d'entrée fluide et moderne (fade-in + scale + effet visuel optionnel) qui transitionne vers le Desktop.

### Dépendances
- **Requiert Story 2.1** : LoadingScreen doit être en place
- **Séquence**: LoadingScreen → EntryEffect → Desktop

## Scope précis

### In Scope ✅
- Création composant EntryEffect avec animation "waou"
- Animation : fade-in + scale (0.8 → 1.0) + effet visuel optionnel (particles/glow)
- Durée : 800ms - 1200ms
- Transition fluide vers Desktop (fade out EntryEffect, fade in Desktop)
- Intégration dans App.jsx (séquence loading)

### Out of Scope ❌
- Effets 3D complexes (particles Three.js) - CSS animations uniquement
- Configuration avancée (durée, type) - hardcodé pour MVP
- Animation différente selon device - même animation pour tous

## Acceptance Criteria

1. **AC1 - Composant EntryEffect**
   - Composant EntryEffect créé et fonctionnel
   - Animation fade-in + scale visible et fluide
   - Durée 800-1200ms

2. **AC2 - Effet visuel "waou"**
   - Effet visuel impressionnant (glow, particles CSS, ou autre)
   - Design cohérent avec thème futuriste
   - Animation fluide 60fps

3. **AC3 - Séquence chargement**
   - Séquence correcte : LoadingScreen → EntryEffect → Desktop
   - Transitions fluides entre chaque étape
   - Pas de flash ou saut visuel

4. **AC4 - Performance**
   - Animation fluide sans lag
   - Pas d'impact négatif sur performance Desktop
   - Durée totale transition < 2s (EntryEffect + transitions)

5. **AC5 - Gestion erreurs**
   - Si animation échoue : skip, afficher Desktop directement
   - Pas de blocage si CSS manquant
   - Pas d'erreur visible utilisateur

## Impacts

### Fichiers/Modules à créer
- `src/components/EntryEffect/EntryEffect.jsx` - Composant animation entrée
- `src/components/EntryEffect/EntryEffect.module.css` - Styles et animations CSS

### Fichiers à modifier
- `src/App.jsx` - Intégrer EntryEffect dans séquence loading
- `src/components/Desktop/Desktop.module.css` - Ajuster fade-in si nécessaire

### Endpoints
**Aucun**

### Base de données
**Aucune**

### Dépendances npm
**Aucune nouvelle** - CSS animations natives uniquement

## Tasks / Subtasks

- [ ] **Task 1: Création composant EntryEffect** (AC: 1)
  - [ ] Créer `src/components/EntryEffect/EntryEffect.jsx`
  - [ ] Créer `src/components/EntryEffect/EntryEffect.module.css`
  - [ ] Structure basique : conteneur avec animation

- [ ] **Task 2: Animation fade-in + scale** (AC: 1, 4)
  - [ ] CSS keyframes : opacity 0 → 1, scale 0.8 → 1.0
  - [ ] Durée : 800-1200ms (configurable via CSS variable)
  - [ ] Easing : ease-out ou cubic-bezier pour effet "waou"
  - [ ] Tester fluidité 60fps

- [ ] **Task 3: Effet visuel "waou"** (AC: 2)
  - [ ] Ajouter effet visuel (glow, particles CSS, gradient animé, etc.)
  - [ ] Design cohérent avec thème futuriste
  - [ ] Animation synchronisée avec fade-in + scale
  - [ ] Optionnel : particles CSS (pseudo-elements animés)

- [ ] **Task 4: Intégration séquence App.jsx** (AC: 3)
  - [ ] Modifier `src/App.jsx`
  - [ ] Gérer état : `loadingState: 'loading' | 'entering' | 'ready'`
  - [ ] Afficher EntryEffect si `loadingState === 'entering'`
  - [ ] Transition : LoadingScreen fade out → EntryEffect fade in
  - [ ] Transition : EntryEffect fade out → Desktop fade in

- [ ] **Task 5: Transitions fluides** (AC: 3, 4)
  - [ ] CSS transitions entre étapes (300ms chacune)
  - [ ] Z-index correct : EntryEffect au-dessus de LoadingScreen, Desktop au-dessus après
  - [ ] Tester séquence complète sans flash

- [ ] **Task 6: Gestion erreurs** (AC: 5)
  - [ ] Si animation CSS manquante : skip EntryEffect, afficher Desktop
  - [ ] Try/catch si nécessaire (peu probable avec CSS)
  - [ ] Timeout sécurité : si EntryEffect > 2s, afficher Desktop

- [ ] **Task 7: Tests** (AC: 1, 3, 4)
  - [ ] Test animation visible et fluide
  - [ ] Test séquence complète (Loading → Entry → Desktop)
  - [ ] Test performance (pas de lag)

## Dev Notes

### Architecture technique

**Source: design-solution-par-lot.md#Lot-2**

#### Séquence de chargement complète
```
[Page charge]
  → LoadingScreen (loadingState: 'loading')
  → Chargement ressources
  → EntryEffect (loadingState: 'entering')
  → Animation 800-1200ms
  → Desktop (loadingState: 'ready')
```

#### État dans App.jsx
```javascript
const [loadingState, setLoadingState] = useState('loading');

// Après chargement ressources
setLoadingState('entering'); // Affiche EntryEffect

// Après animation EntryEffect
setTimeout(() => {
  setLoadingState('ready'); // Affiche Desktop
}, 1200); // Durée max animation
```

#### Animation CSS suggérée
```css
@keyframes waouEffect {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

/* Optionnel : glow effect */
@keyframes glow {
  0%, 100% { box-shadow: 0 0 20px rgba(...); }
  50% { box-shadow: 0 0 40px rgba(...); }
}
```

#### Effets visuels possibles
- **Glow**: Box-shadow animé autour du conteneur
- **Particles CSS**: Pseudo-elements (::before, ::after) avec animation
- **Gradient animé**: Background gradient avec animation
- **Blur effect**: Backdrop-filter blur animé

**Important**: Design cohérent avec thème, pas de gradient purple/blue par défaut.

### Patterns existants

**Source: etat-des-lieux.md#Patterns-existants**

- **CSS Modules**: Utiliser `.module.css`
- **CSS Animations**: Utiliser keyframes (pas de lib externe)
- **Performance**: Transform/opacity pour GPU acceleration

### Gestion d'erreurs

**Source: design-solution-par-lot.md#Lot-2**

- **Animation Error**: Si animation CSS échoue → skip animation, afficher Desktop
- **Timeout**: Si animation > 2s → afficher Desktop (sécurité)
- **ErrorBoundary**: Si Story 3.1 faite, peut capturer erreurs

### Performance

- **Durée totale**: < 2s (EntryEffect + transitions)
- **60fps**: Utiliser transform/opacity (GPU accelerated)
- **Pas de JS lourd**: CSS animations uniquement

### Risques identifiés

1. **Animation trop lente** (Impact: Faible, Probabilité: Faible)
   - **Mitigation**: Durée max 1200ms, timeout sécurité
   - **Rollback**: Réduire durée à 600ms, simplifier effet

2. **Performance dégradée** (Impact: Faible, Probabilité: Faible)
   - **Mitigation**: CSS GPU accelerated, pas de JS
   - **Rollback**: Simplifier animation, retirer effets optionnels

### Plan de rollback

1. **Rollback immédiat**: Désactiver EntryEffect dans App.jsx (skip 'entering' state)
2. **Rollback partiel**: Garder EntryEffect mais sans effets visuels (juste fade-in)
3. **Rollback complet**: Supprimer composant, transition directe LoadingScreen → Desktop

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-27 | 1.0 | Story créée | Bob (SM) |

## Dev Agent Record
_TBD_

## QA Results
_TBD_
